////////////////////////////////////////////////////////////////////////////////
// VOLTAGE-CONTROLLED AMPLIFIER
////////////////////////////////////////////////////////////////////////////////

#include "synth.hpp"

void Synth::update_vca() {
    auto env = vca.env_ar ? ar.out : adsr.out;
    vca.out = (vca.env * env + vca.gain) * hpf.out;
}
